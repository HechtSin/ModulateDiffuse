This is a script to modulate a supercell with by a phonon eigenvectors using phonopy package. Then to do the Fourier transform to get the diffuse scattering and plot
